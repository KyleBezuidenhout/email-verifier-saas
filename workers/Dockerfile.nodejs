FROM node:18-slim

# Explicitly set PATH to ensure node is accessible
ENV PATH="/usr/local/bin:/usr/bin:/bin:${PATH}"

WORKDIR /app

# Copy package files and install dependencies
COPY workers/package*.json ./
RUN npm ci --only=production

# Copy worker script
COPY workers/index.js .

# Run the Node.js worker using direct node command
CMD ["/usr/local/bin/node", "index.js"]

